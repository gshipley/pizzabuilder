<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Stack Pizza Builder</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1>AI Stack Pizza Builder</h1>

    <div class="step-indicator">
      <div class="step active">
        <div class="step-number">1</div>
        <div class="step-label">GPU Hardware</div>
      </div>
      <div class="step">
        <div class="step-number">2</div>
        <div class="step-label">Base Model</div>
      </div>
      <div class="step">
        <div class="step-number">3</div>
        <div class="step-label">Vector Database</div>
      </div>
      <div class="step">
        <div class="step-number">4</div>
        <div class="step-label">Chat UI</div>
      </div>
    </div>

    <div class="builder-section">
      <div class="dropdowns-container">
        <div class="dropdown-section">
          <div class="dropdown-label">GPU Hardware</div>
          <div class="dropdown">
            <select id="gpu-select">
              <option value="">Select GPU Hardware</option>
              <option value="gaudi">Intel Gaudi</option>
              <option value="nvidia">NVIDIA</option>
              <option value="amd">AMD</option>
              <option value="cpu">CPU Only</option>
            </select>
          </div>
        </div>
        
        <div class="dropdown-section">
          <div class="dropdown-label">Base Model</div>
          <div class="dropdown">
            <select id="model-select" disabled>
              <option value="">Select Base Model</option>
              <option value="granite">Granite</option>
              <option value="llama">Llama</option>
              <option value="qwen">Qwen</option>
            </select>
          </div>
        </div>
        
        <div class="dropdown-section">
          <div class="dropdown-label">Vector Database</div>
          <div class="dropdown">
            <select id="vector-select" disabled>
              <option value="">Select Vector Database</option>
              <option value="pgvector">pgvector</option>
              <option value="mongodb">MongoDB</option>
            </select>
          </div>
        </div>
        
        <div class="dropdown-section">
          <div class="dropdown-label">Chat UI</div>
          <div class="dropdown">
            <select id="ui-select" disabled>
              <option value="">Select Chat UI</option>
              <option value="anythingllm">AnythingLLM</option>
              <option value="openwebui">Open WebUI</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <div class="deploy-section">
      <button id="deploy-btn" disabled>Deploy</button>
    </div>

    <div class="visualization">
      <div class="description">
        <p id="stack-description">
          Start building your AI stack by selecting a GPU hardware option. You'll see your AI stack visualization build up as a delicious pizza in real-time!
        </p>
        <div class="pizza-complete" id="complete-message">
          ðŸŽ‰ Your AI stack is complete and ready to deploy!
        </div>
      </div>
      
      <div class="pizza-container">
        <div class="pizza-base"></div>
        
        <!-- Pizza parts will be SVGs -->
        <svg class="pizza-part crust" id="crust" viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg">
          <circle cx="150" cy="150" r="140" fill="#E2A764" stroke="#BD8540" stroke-width="3"/>
          <circle cx="150" cy="150" r="125" fill="#F3C17F" stroke="#BD8540" stroke-width="1"/>
        </svg>
        
        <svg class="pizza-part cheese" id="cheese" viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg">
          <circle cx="150" cy="150" r="125" fill="#FBE46D" stroke="#E6C75F" stroke-width="1"/>
          <!-- Cheese texture -->
          <circle cx="120" cy="100" r="8" fill="#FCE985"/>
          <circle cx="180" cy="130" r="10" fill="#FCE985"/>
          <circle cx="90" cy="160" r="9" fill="#FCE985"/>
          <circle cx="210" cy="170" r="7" fill="#FCE985"/>
          <circle cx="140" cy="200" r="8" fill="#FCE985"/>
          <circle cx="160" cy="70" r="7" fill="#FCE985"/>
        </svg>
        
        <svg class="pizza-part topping1" id="topping1" viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg">
          <!-- Pepperoni -->
          <circle cx="100" cy="100" r="15" fill="#D62D20"/>
          <circle cx="160" cy="80" r="15" fill="#D62D20"/>
          <circle cx="200" cy="140" r="15" fill="#D62D20"/>
          <circle cx="130" cy="170" r="15" fill="#D62D20"/>
          <circle cx="90" cy="210" r="15" fill="#D62D20"/>
          <circle cx="220" cy="190" r="15" fill="#D62D20"/>
          <circle cx="180" cy="220" r="15" fill="#D62D20"/>
        </svg>
        
        <svg class="pizza-part topping2" id="topping2" viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg">
          <!-- Mushrooms -->
          <ellipse cx="130" cy="120" rx="12" ry="8" fill="#A57D64"/>
          <rect x="126" y="120" width="8" height="10" fill="#BEAE9A"/>
          
          <ellipse cx="210" cy="160" rx="12" ry="8" fill="#A57D64"/>
          <rect x="206" y="160" width="8" height="10" fill="#BEAE9A"/>
          
          <ellipse cx="90" cy="180" rx="12" ry="8" fill="#A57D64"/>
          <rect x="86" y="180" width="8" height="10" fill="#BEAE9A"/>
          
          <ellipse cx="170" cy="210" rx="12" ry="8" fill="#A57D64"/>
          <rect x="166" y="210" width="8" height="10" fill="#BEAE9A"/>
          
          <ellipse cx="150" cy="90" rx="12" ry="8" fill="#A57D64"/>
          <rect x="146" y="90" width="8" height="10" fill="#BEAE9A"/>
        </svg>

        <!-- Logo overlay in bottom right -->
        <div class="logo-overlay">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="#3498db" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M2 17L12 22L22 17" stroke="#3498db" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M2 12L12 17L22 12" stroke="#3498db" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Elements
    const gpuSelect = document.getElementById('gpu-select');
    const modelSelect = document.getElementById('model-select');
    const vectorSelect = document.getElementById('vector-select');
    const uiSelect = document.getElementById('ui-select');
    const deployBtn = document.getElementById('deploy-btn');
    const stackDescription = document.getElementById('stack-description');
    const completeMessage = document.getElementById('complete-message');
    
    // Pizza parts
    const crust = document.getElementById('crust');
    const cheese = document.getElementById('cheese');
    const topping1 = document.getElementById('topping1');
    const topping2 = document.getElementById('topping2');
    
    // Step indicators
    const steps = document.querySelectorAll('.step');
    
    // GPU Hardware selection
    gpuSelect.addEventListener('change', function() {
      if (this.value) {
        modelSelect.disabled = false;
        activateStep(1);
        showPizzaPart('crust');
        updateDescription();
      } else {
        modelSelect.disabled = true;
        deactivateSteps();
        hidePizzaParts();
        updateDescription();
      }
    });
    
    // Base Model selection
    modelSelect.addEventListener('change', function() {
      if (this.value) {
        vectorSelect.disabled = false;
        activateStep(2);
        showPizzaPart('cheese');
        updateDescription();
      } else {
        vectorSelect.disabled = true;
        deactivateStepsFrom(2);
        hidePizzaPartsFrom('cheese');
        updateDescription();
      }
    });
    
    // Vector Database selection
    vectorSelect.addEventListener('change', function() {
      if (this.value) {
        uiSelect.disabled = false;
        activateStep(3);
        showPizzaPart('topping1');
        updateDescription();
      } else {
        uiSelect.disabled = true;
        deactivateStepsFrom(3);
        hidePizzaPartsFrom('topping1');
        updateDescription();
      }
    });
    
    // Chat UI selection
    uiSelect.addEventListener('change', function() {
      if (this.value) {
        deployBtn.disabled = false;
        // Fixed: Check if the step exists before trying to access it
        if (steps[3]) {
          activateStep(3);
        }
        showPizzaPart('topping2');
        completeMessage.classList.add('active');
        updateDescription();
      } else {
        deployBtn.disabled = true;
        // Fixed: Safely deactivate steps
        if (steps[3]) {
          deactivateStepsFrom(3);
        }
        hidePizzaPartsFrom('topping2');
        completeMessage.classList.remove('active');
        updateDescription();
      }
    });
    
    // Deploy button
    deployBtn.addEventListener('click', function() {
      alert('Deploying your AI stack with the following components:\n\n' +
            'GPU Hardware: ' + gpuSelect.options[gpuSelect.selectedIndex].text + '\n' +
            'Base Model: ' + modelSelect.options[modelSelect.selectedIndex].text + '\n' +
            'Vector Database: ' + vectorSelect.options[vectorSelect.selectedIndex].text + '\n' +
            'Chat UI: ' + uiSelect.options[uiSelect.selectedIndex].text);
    });
    
    // Helper functions
    function activateStep(stepIndex) {
      // Fixed: Ensure the step exists before trying to modify it
      if (steps[stepIndex]) {
        steps[stepIndex].classList.add('active');
      }
    }
    
    function deactivateSteps() {
      steps.forEach((step, index) => {
        if (index > 0) {
          step.classList.remove('active');
        }
      });
    }
    
    function deactivateStepsFrom(stepIndex) {
      steps.forEach((step, index) => {
        if (index >= stepIndex) {
          step.classList.remove('active');
        }
      });
    }
    
    function showPizzaPart(part) {
      const element = document.getElementById(part);
      if (element) {
        element.classList.add('active');
      }
    }
    
    function hidePizzaParts() {
      document.querySelectorAll('.pizza-part').forEach(part => {
        part.classList.remove('active');
      });
    }
    
    function hidePizzaPartsFrom(partId) {
      const parts = ['crust', 'cheese', 'topping1', 'topping2'];
      const startIndex = parts.indexOf(partId);
      
      for (let i = startIndex; i < parts.length; i++) {
        const element = document.getElementById(parts[i]);
        if (element) {
          element.classList.remove('active');
        }
      }
    }
    
    function updateDescription() {
      let description = '';
      
      const gpu = gpuSelect.value ? gpuSelect.options[gpuSelect.selectedIndex].text : '';
      const model = modelSelect.value ? modelSelect.options[modelSelect.selectedIndex].text : '';
      const vector = vectorSelect.value ? vectorSelect.options[vectorSelect.selectedIndex].text : '';
      const ui = uiSelect.value ? uiSelect.options[uiSelect.selectedIndex].text : '';
      
      if (!gpu) {
        description = 'Start building your AI stack by selecting a GPU hardware option. You\'ll see your AI stack visualization build up as a delicious pizza in real-time!';
      } else {
        description = `Your AI stack is building with ${gpu} as the foundation (pizza crust)`;
        
        if (model) {
          description += `, ${model} as the base model (cheese)`;
          
          if (vector) {
            description += `, ${vector} as the vector database (pepperoni)`;
            
            if (ui) {
              description += `, and ${ui} as the chat interface (mushrooms).`;
            } else {
              description += `. Now select a chat UI to complete your stack!`;
            }
          } else {
            description += `. Now select a vector database to continue!`;
          }
        } else {
          description += `. Now select a base model to continue building your stack!`;
        }
      }
      
      stackDescription.textContent = description;
    }
    
    // Initialize
    hidePizzaParts();
    
  </script>
</body>
</html>
